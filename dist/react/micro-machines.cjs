"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react"),o=require("../micro-machines.cjs"),h=n=>{const[e,a]=s.useState(),[i,u]=s.useState({context:void 0,state:void 0});console.log("use machine hook"),s.useEffect(()=>{const t=n();return t.onStateChanged(({state:c,context:M})=>{u({state:c,context:{...M}})}),a(t),()=>{t.clearListeners(),a(void 0)}},[n]);const r=s.useCallback(t=>{console.log("Calling start from React hook with",t),e==null||e.start(t).catch(c=>{throw c})},[e]);return{...i,ready:e!==void 0,start:r,success:(e==null?void 0:e.success)===!0,terminated:(e==null?void 0:e.terminated)===!0}},S=(n,e)=>{const{start:a,state:i,context:u,ready:r,success:t,terminated:c}=h(n);return s.useEffect(()=>{r&&a(e)},[r,a,e]),{state:i,context:u,success:t,terminated:c}};exports.State=o.State;exports.StateMachine=o.StateMachine;exports.createMachine=o.createMachine;exports.runMachine=o.runMachine;exports.useAutoStartingMachine=S;exports.useMachine=h;
